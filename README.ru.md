[**English**](https://github.com/runetfreedom/discord-voice-proxy/blob/master/README.md) | **Русский**

# Что это

Это DLL для автоматический загрузки [force-proxy](https://github.com/runetfreedom/force-proxy/) в процесс дискорда, а так же автоматически установщик.

Этот DLL корректно обрабатывает обновления дискорда, так что работает по принципу "Установил и забыл".

## Зачем

Голосовые чаты дискорда не поддерживают соединения через прокси, что заставляет полностью заворачивать трафик компьютера в какой-либо VPN или туннель, что крайне не удобно.

## Как это работает

Работает на основе DLL Hijacking системной библиотеки DWrite.dll.

Благодаря этому мы получаем возможность исполнять код внутри процесса Discord.exe, парсим конфиг и загружаем force-proxy.dll, который перехватывает сетевой трафик дискорда и направляет его в SOCKS5 прокси.

# Как установить

Существует два способа установки:

### Автоматическая установка

Для вашего удобства существует [готовый инсталлятор](https://github.com/runetfreedom/discord-voice-proxy/releases/latest/download/DiscordProxyInstaller.exe). При запуске вам нужно задать только ip и порт до вашего прокси, но инсталлер сможет автоматически определить параметры, если у вас запущен один из этих клиентов:

1. v2rayN
2. NekoRay / NekoBox
3. Invisible Man - XRay (режим прокси должен быть socks)

Хотите удалить? Запустите инсталлятор еще раз, он предложит вам удалить установленные файлы.

### Ручная установка

Хотите установить вручную? Никаких проблем.

1. Для начала скачайте DWrite.dll и force-proxy.dll со страницы релиза
2. Откройте в проводнике `%LocalAppData%\Discord`
3. Найдите папку app с самой новой версией и поместите туда оба dll файла
4. Создайте файл proxy.txt и впишите туда:

```
SOCKS5_PROXY_ADDRESS=ВАШ_ПРОКСИ_IP
SOCKS5_PROXY_PORT=ВАШ_ПРОКСИ_ПОРТ
```

Не забудьте перезапустить дискорд. Готово!